<div>


  <mat-toolbar *ngIf="flagEdit" class="mainTolbar2">
    <span>XF1 Fantasy</span>
    <span class="example-spacer"></span>
    <button *ngFor="let item of menu" class="buttonMy" [routerLink]="item.redirect" mat-raised-button> {{item.nombre}} </button>
    <button routerLink="/main/start" class="myIcon" rou mat-icon-button>
      <mat-icon class="myIcon">home</mat-icon>
    </button>
    <button  routerLink="/login" class="myIcon"  mat-icon-button>
      <mat-icon class="myIcon">logout</mat-icon>
    </button>
  </mat-toolbar>

  <mat-toolbar *ngIf="!flagEdit" class="mainTolbar">
    <span>Creaci√≥n de Equipos</span>
  </mat-toolbar>

  <mat-spinner *ngIf="loading" class="spinner" diameter="50" ></mat-spinner>

  <mat-grid-list  cols="2" rowHeight="820px">


<!-- -----------------------------------------------Tile para seleccionar equipo--------------------------------------------------- -->
<mat-grid-tile [colspan]="1">
  <mat-card class="mycard">

  <!-- --------------------------------------------------Panel para los pilotos------------------------------------------------------ -->
    <mat-accordion>
      <mat-expansion-panel [expanded]="stepTeam === 0" (opened)="setStep(0)" hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Pilotos
          </mat-panel-title>
          <mat-panel-description>
            Elegir Pilotos
          </mat-panel-description>
        </mat-expansion-panel-header>


        <table mat-table [dataSource]="dataSourceDrivers" class="teamTable">


          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Nombre </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>

          <!-- Price Column -->
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef> Precio</th>
            <td mat-cell *matCellDef="let element"> {{element.price}} </td>
          </ng-container>

          <!-- Price Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element; let i = index" style="text-align: right;">
              <a *ngIf="element.state == 'notChoosed'"
                    class="pointer"  style="color:
                   green;" >
                  <button class="esperaButton" (click)="addDriver(element.name, element.price)"
                  mat-button>Agregar</button>
              </a>
              <a *ngIf="element.state == 'choosed'" class="pointer"
                    style="color: indianred;">
                    <button class="esperaButton" (click)="deleteDriver(element.name, element.price)"
                     mat-button>Eliminar</button>
              </a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsDrivers"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsDrivers;"></tr>
        </table>
        <mat-paginator [pageSize]="5"></mat-paginator>

        <mat-action-row>
          <button mat-button color="primary" (click)="nextStep()">Constructor</button>
        </mat-action-row>
      </mat-expansion-panel>

      <!-- --------------------------------------------------Panel para los pilotos------------------------------------------------------ -->

      <!-- -----------------------------------------------Panel para los Constructores--------------------------------------------------- -->
      <mat-expansion-panel [expanded]="stepTeam === 1" (opened)="setStep(1)" hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Constructor
          </mat-panel-title>
          <mat-panel-description>
            Elegir Constructor
          </mat-panel-description>
        </mat-expansion-panel-header>

        <table mat-table [dataSource]="dataSourceConstructors" class="teamTable">


          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Nombre </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>

          <!-- Price Column -->
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef> Precio</th>
            <td mat-cell *matCellDef="let element"> {{element.price}} </td>
          </ng-container>

          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let element; let i = index" style="text-align: right;">
              <a *ngIf="element.state == 'notChoosed'"
                    class="pointer"  style="color:
                   green;" matTooltip="Editar Empleado">
                  <button class="esperaButton" (click)="addDeleteConstructor(element.name, element.price, 'add')"
                  mat-button>Agregar</button>
              </a>
              <a *ngIf="element.state == 'choosed'" class="pointer"
                    style="color: indianred;"
                    matTooltip="Eliminar Empleado">
                    <button class="esperaButton" (click)="addDeleteConstructor(element.name, element.price, 'delete')"
                     mat-button>Eliminar</button>
              </a>
          </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsConstructors"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsConstructors;"></tr>
        </table>

        <mat-action-row>
          <button mat-button color="primary" (click)="prevStep()">Pilotos</button>
          <button mat-button color="primary" (click)="nextStep()">Terminar</button>
        </mat-action-row>
      </mat-expansion-panel>
      <!-- -----------------------------------------------Panel para los Constructores--------------------------------------------------- -->

      </mat-accordion>
    </mat-card>
  </mat-grid-tile>
  <!-- -----------------------------------------------Tile para seleccionar equipo------------------------------------------------------ -->

  <!-- -----------------------------------------------------Tile para visualizar-------------------------------------------------------- -->
  <mat-grid-tile [colspan]="1">
    <mat-card class="mycard">
      <form [formGroup]="formTeam1" >
        <mat-grid-list cols="2" rowHeight="70px">



          <mat-grid-tile  [colspan]="2" [rowspan]="1" >
            <h1>{{nameTeam}}</h1>
            <mat-form-field *ngIf="!flagEdit" class="ancho" appearance="fill">
              <mat-label>Nombre del Equipo</mat-label>
              <input type="text" matInput formControlName="teamName" autocomplete="off">
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1" >
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Presupuesto Gastado</mat-label>
              <input type="text" matInput formControlName="spentBudget" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1" >
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Presupuesto Disponible</mat-label>
              <input type="text" matInput formControlName="remainingBudget" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1" >
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Plioto 1</mat-label>
              <input type="text" matInput formControlName="driver1" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1">
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Plioto 2</mat-label>
              <input type="text" matInput formControlName="driver2" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1">
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Plioto 3</mat-label>
              <input type="text" matInput formControlName="driver3" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1">
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Plioto 4</mat-label>
              <input type="text" matInput formControlName="driver4" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1">
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Plioto 5</mat-label>
              <input type="text" matInput formControlName="driver5" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1" >
            <mat-form-field class="ancho" appearance="fill">
              <mat-label>Constructor</mat-label>
              <input type="text" matInput formControlName="constructor" autocomplete="off" readonly>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1" [style.background]="'ligthblue'">
            <button *ngIf="!flagEdit"  (click)="createTeam()" [disabled]="formTeam1.invalid" class="myButton" mat-raised-button>Crear</button>
            <button *ngIf="flagEdit" (click)="updateTeam1()" [disabled]="formTeam1.invalid" class="myButton" mat-raised-button>Actualizar</button>
          </mat-grid-tile>

        </mat-grid-list>
      </form>
    </mat-card>
  </mat-grid-tile>
  <!-- -----------------------------------------------------Tile para visualizar-------------------------------------------------------- -->

</mat-grid-list>
</div>
